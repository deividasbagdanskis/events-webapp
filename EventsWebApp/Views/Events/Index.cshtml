@model IEnumerable<EventsWebApp.Models.Event>

@{
    ViewData["Title"] = "Index";
}

<h1>Upcoming events</h1>

@*<p>
    <a asp-action="Create">Create New</a>
</p>*@
    <div class="row justify-content-between mt-4 mb-3">
        <div class="col-md-4">
            <form class="form-inline" method="get" asp-action="Index">
                <label class="mr-2" for="city">City</label>
                <input id="city" name="city" class="form-control mr-2 col-sm-7" type="text" placeholder="Vilnius" />
                <button type="submit" class="btn btn-primary">Search</button>
            </form>
        </div>
        <div class="col-md-4 form-inline">
            <label class="mr-2" for="category">Category</label>
            <select id="category" class="col-sm-6 form-control" asp-items="ViewBag.Categories"></select>
        </div>
        <div class="col-md-4 form-inline">
            <label for="time" class="mr-2">Time</label>
            <select id="time" class="form-control col-sm-7">
                <option value="0">All time</option>
                <option value="7">Week</option>
                <option value="14">2 weeks</option>
                <option value="30">Months</option>
            </select>
        </div>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Description)
                </th>
                <th>
                    @Html.DisplayName("Category")
                </th>
                <th>
                    @Html.DisplayName("Date")
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.City)
                </th>
                <th>
                    @Html.DisplayName("Going")
                </th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.ActionLink(item.Name, "Details", new { id = item.Id })

                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description.Substring(0, 20))
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Category.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.DateAndTime.ToString("m"))
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.City)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.EventAttendees.Count)
                        </td>
                        @*<td>
                                @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
                                 |
                                @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
                            </td>*@
                    </tr>
                }
            }
        </tbody>
    </table>
